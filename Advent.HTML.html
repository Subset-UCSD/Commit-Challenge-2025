<!DOCTYPE html>
<html>
<head>
<title>Advent calendar 2025</title>
<meta name="description" content="happy Twitter mass"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<script>
  if(new URL(location).searchParams.get('debug')==='yes'){
    const e=document.createElement('pre')
    Object.assign(e.style,{position:'fixed',top:0,left:0,background:'rgba(0,0,0,.8)',color:'white',zIndex:999,padding:'10px',margin:0,whiteSpace:'pre-wrap'})
    document.documentElement.append(e)
    const h=m=>e.textContent+=`\n${m.reason?.stack||m.error?.stack||m.message||'unknown error'}`
    window.addEventListener('error',h)
    window.addEventListener('unhandledrejection',h)
  }
</script>
<style>
  body {
    background: lightblue;
  }
  .days{
    display: grid;
    grid-template-columns: repeat(auto-fill, 180px);
    justify-content: center;
    padding: 20px;
    gap: 20px;
  }
  .day{
    aspect-ratio: 1/1;
    background-color: green;
    border: 5px solid darkred;
    position: relative;
  }
   .day-name {
     cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
     position: absolute; 
     inset:0;
  }
  .day-name{
background: none; border:0; font: inherit; color: inherit;
  }
  .day-name:disabled{
    cursor: not-allowed;
  }
  
.closed .content, .open .day-name {
      display: none;
    }


  
</style>
</head>

<body>

  <p>
    Hello welcome to commit challenge 2025's advent calendar! presented by subset UCSD
  </p>
  <p>
    when the day comes, CLICK the box to rip it open. some days might have nothing. this will happen if no one put anything in the box, which would be very sad
  </p>

<div class=days>

<!--div class="day closed" id="day-00">
  <button class="day-name">not December</button>
  <div class="content">
    this is a test and will be removed someday
  </div>
</div-->
  
<div class="day closed" id="day-01">
  <button class="day-name">Dec 1</button>
  <div class="content">
    Hello welcome to December!
  </div>
</div>

<div class="day closed" id="day-02">
  <button class="day-name">Dec 2</button>
  <div class="content">
    <p>✨ sparkle on! ✨ </p>
    <img src='ass/ets/PXL_20250608_195831651~2.jpg' alt='hunan (possibly male) with eyes and mouth"' width=120>
      <p>its tuesday and marc wishes you a hapy decemer TWO</p>
  <span style="font-size: 1.2em">2! = 2</span>
  </div>
</div>

<div class="day closed" id="day-03">
  <button class="day-name">Dec 3</button>
  <div class="content">
    <p id=d3a>uhh...</p>
    <p id=d3b> ?</p>
    <img src="ass/ets/PXL_20250304_011128268~2.jpg" alt="human face wirh eyes" id="d3i" width=60 height=60>
    <style>
      #d3i {
        animation: fade 10s 6s both;
      }
      #d3a{visibility:hidden;
animation: visible 3s 1s;
      }
      #d3b{
visibility:hidden;
        animation:visible 5s 3s;
        transform-origin: bottom right;
        position:absolute;
        bottom:0;right:0;
        font-size:1px;
        transform: scale(24) scaleX(1.3);
        
      }
      @keyframes visible {
        from ,to{ visible: 


          t; visibility: visible;} }


          @keyframes fade {
            from{opacity:0}
            to { opacity:1}
          }
    </style>
  </div>
</div>
<div class="day closed" id="day-04">
  <button class="day-name">Dec 4</button>
  <div class="content" id=d4>
    <h2>wise proverb</h2>
    <button type=button id=d4b>wisen me</button>
    <p id=d4zh style="font-size:1.2em"></p>    <p id=d4en style="font-size"></p>
    <script type=module>
      let last = Promise.withResolvers()
      const q=[Promise.withResolvers()]
      let j=0
      document;d4b.onclick=()=>{
        last
        q[j]??=Promise.withResolvers()
        q[j].resolve()
        j++
      //  q.at(-1).resolve()
    //    q.push(Promise.withResolvers() )
      }
      let i=0
      //. nc = next click
      const nc=()=>{
return (    q[i++]??=Promise.withResolvers()).promise
      }
      await nc()
//```js
//await (
  const t=    await window?.Translator?.create({sourceLanguage:'en', targetLanguage:'zh',
                                          monitor:m=>{
m.ondownloadprogress=e=>console.log("d4",e.loaded)
                                          }
                                              
                                              } )
      .catch(console.error)
  //      / ).translate('avocado')
      while (true){
        let s = ""
        for (let k=4;k--;)s+=
          //"草您媽"//
          String.fromCodePoint(Math.floor(Math.random()*(0xa000-0x4e00) +0x4e00))
          
        d4zh.textContent=s
        d4en.textContent= await t?.translate(s).catch( ()=> "too expressive for english)")??
          "please disable sdblock by switching to chrome desktoop"
     //     / 'go lck sam altmans feet"l .. '
 await nc()
      }
//```
//<@418667403396775936> they shipped AI API for some reason (chrome)
    </script>
  </div>
</div>
<div class="day closed" id="day-05">
  <button class="day-name">Dec 5</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-06">
  <button class="day-name">Dec 6</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-07">
  <button class="day-name">Dec 7</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-08">
  <button class="day-name">Dec 8</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-09">
  <button class="day-name">Dec 9</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-10">
  <button class="day-name">Dec 10</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-11">
  <button class="day-name">Dec 11</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-12">
  <button class="day-name">Dec 12</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-13">
  <button class="day-name">Dec 13</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-14">
  <button class="day-name">Dec 14</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-15">
  <button class="day-name">Dec 15</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-16">
  <button class="day-name">Dec 16</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-17">
  <button class="day-name">Dec 17</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-18">
  <button class="day-name">Dec 18</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-19">
  <button class="day-name">Dec 19</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-20">
  <button class="day-name">Dec 20</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-21">
  <button class="day-name">Dec 21</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-22">
  <button class="day-name">Dec 22</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-23">
  <button class="day-name">Dec 23</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-24">
  <button class="day-name">Dec 24</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-25">
  <button class="day-name">Dec 25</button>
  <div class="content">
    Merry Christmas!
  </div>
</div>
  
</div>

  <script>
    const params = new URL(location).searchParams
const debugMode=params.get('debug')==='yes'
    const d = debugMode
    const now=Date.now()
    // BUGFIX: the selector was for the tag `day`, not the class `.day`
    for (const day of document.querySelectorAll('.day')){
// BUGFIX: the day number is at index 1 after splitting, not 0
const date = new Date(2025,12-1,+day.id.split('-')[1])
      const name=day.querySelector('.day-name')
      if (!d&&date>now) {
        name.disabled=true
      }
      name.onclick=()=>{
        day.classList.remove('closed')
        day.classList.add('open')
   if(!d)     localStorage[`advent2025-${day.id}`]='YES'
      }
      if(!d&&localStorage[`advent2025-${day.id}`]==='YES'){
name.click()
      }
    }
  </script>
  
</body>
