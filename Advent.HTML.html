<!DOCTYPE html>
<html>
<head>
<title>Advent calendar 2025</title>
<meta name="description" content="happy Twitter mass"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<script>
  if(new URL(location).searchParams.get('debug')==='yes'){
    const e=document.createElement('pre')
    Object.assign(e.style,{position:'fixed',top:0,left:0,background:'rgba(0,0,0,.8)',color:'white',zIndex:999,padding:'10px',margin:0,whiteSpace:'pre-wrap'})
    document.documentElement.append(e)
    const h=m=>e.textContent+=`\n${m.reason?.stack||m.error?.stack||m.message||'unknown error'}`
    window.addEventListener('error',h)
    window.addEventListener('unhandledrejection',h)
  }
</script>
<style>
  body {
    background: lightblue;
  }
  .days{
    display: grid;
    grid-template-columns: repeat(auto-fill, 180px);
    justify-content: center;
    padding: 20px;
    gap: 20px;
  }
  .day{
    aspect-ratio: 1/1;
    background-color: green;
    border: 5px solid darkred;
    position: relative;
  }
   .day-name {
     cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
     position: absolute; 
     inset:0;
     z-index: 100000000;
     background-color: green!important;
  }
  .day-name{
background: none; border:0; font: inherit; color: inherit;
z-index: 10000;
      background-color: green;
  }.day-name:enabled{   font-weight:bold;
    box-shadow:0 0 0 2px red;
  }
  .day-name:disabled{
    cursor: not-allowed;
    
  }
  
  .content {
    height: 100%;
    overflow: auto;
  }
.closed .content{
  display: none;
  
}.alreadyOpen.open .day-name {
      display: none;
    }
    .open .day-name {
      transform-origin: left;
      animation: open 1s forwards;
    }
    @keyframes open {
      from {
        visibility: visible;
        transform: perspective(500px);
      }
      to {
        visibility: hidden;
        transform:perspective(500px) rotateY(-90deg)
      }
    }


  
</style>
</head>

<body>
<h1>Advent UCBender 2025</h1>
  <p>
    Hello welcome to commit challenge 2025's advent calendar! presented by subset UCSD
  </p>
  <p>
    when the day comes, CLICK the box to rip it open. some days might have nothing. this will happen if no one put anything in the box, which would be very sad
  </p>
  <h2>fack (frequently asked curiosities k)</h2>
  <dl>
    <dt>i hate christmas</dt>
    <dd>go <a href="/">home</a> then idot</dd>
  </dl>

<div class=days>

<!--div class="day closed" id="day-00">
  <button class="day-name">not December</button>
  <div class="content">
    this is a test and will be removed someday
  </div>
</div-->
  
<div class="day closed" id="day-01">
  <button class="day-name">Dec 1</button>
  <div class="content">
    Hello welcome to December!
  </div>
</div>

<div class="day closed" id="day-02">
  <button class="day-name">Dec 2</button>
  <div class="content">
    <p>âœ¨ sparkle on! âœ¨ </p>
    <img src='ass/ets/PXL_20250608_195831651~2.jpg' alt='hunan (possibly male) with eyes and mouth"' width=120>
      <p>its tuesday and marc wishes you a hapy decemer TWO</p>
  <span style="font-size: 1.2em">2! = 2</span>
  </div>
</div>

<div class="day closed" id="day-03">
  <button class="day-name">Dec 3</button>
  <div class="content">
    <p id=d3a>uhh...</p>
    <p id=d3b> ?</p>
    <img src="ass/ets/PXL_20250304_011128268~2.jpg" alt="human face wirh eyes" id="d3i" width=60 height=60>
    <style>
      #d3i {
        animation: fade 10s 6s both;
      }
      #d3a{visibility:hidden;
animation: visible 3s 1s;
      }
      #d3b{
visibility:hidden;
        animation:visible 5s 3s;
        transform-origin: bottom right;
        position:absolute;
        bottom:0;right:0;
        font-size:1px;
        transform: scale(24) scaleX(1.3);
        
      }
      @keyframes visible {
        from ,to{ visible: 


          t; visibility: visible;} }


          @keyframes fade {
            from{opacity:0}
            to { opacity:1}
          }
    </style>
  </div>
</div>
<div class="day closed" id="day-04">
  <button class="day-name">Dec 4</button>
  <div class="content" id=d4>
    <h2>wise proverb</h2>
    <button type=button id=d4b>wisen me</button>
    <p id=d4zh style="font-size:1.2em"></p>    <p id=d4en style="font-size"></p>
    <script type=module>
      let last = Promise.withResolvers()
      const q=[Promise.withResolvers()]
      let j=0
      document;d4b.onclick=()=>{
        last
        q[j]??=Promise.withResolvers()
        q[j].resolve()
        j++
      //  q.at(-1).resolve()
    //    q.push(Promise.withResolvers() )
      }
      let i=0
      //. nc = next click
      const nc=()=>{
return (    q[i++]??=Promise.withResolvers()).promise
      }
      await nc()
      d4b.disabled=true
//```js
//await (
  const t=    await window?.Translator?.create({sourceLanguage:'zhn'.slice(0,2)
                                                , targetLanguage:'en',//zh',
                                          monitor:m=>{
m.ondownloadprogress=e=>console.log("d4",e.loaded)
                                          }
                                              
                                              } )
      .catch(console.error)
  //      / ).translate('avocado')
      while (true){
        let s = ""
        for (let k=4;k--;)s+=
          //"è‰æ‚¨åª½"//
          String.fromCodePoint(Math.floor(Math.random()*(0xa000-0x4e00) +0x4e00))
          
        d4zh.textContent=s
        d4en.textContent= await t?.translate(s).catch( ()=> "too expressive for english)")??
          "please disable sdblock by switching to chrome desktoop"
     //     / 'go lck sam altmans feet"l .. '
        d4b.disabled=!true
 await nc()
        d4b.disabled=true
      }
//```
//<@418667403396775936> they shipped AI API for some reason (chrome)
    </script>
  </div>
</div>
<div class="day closed" id="day-05">
  <button class="day-name">Dec 5</button>
  <form class="content" action=javascript: id=d5f>
    <!--h2> make ur own flag!</h2-->
    <h2>are you smarter than ucsd student!</h2>
    <p id=d5q></p>
    <button id=d5b>sdtart</button>
    <script type=module>
      let answer,start
function wow(){
 // let a
// const 
   let r = ()=>Math.floor(Math.random()*9+1)
  const a=r(),b=r(),c=r()
  const l = `${a} + ${b}`
  const i = '<input inputmode=numeric pattern="-?[0-9]" id=d5iiii size=1 type=text>'
  r=Math.random()<0.5 ? `${c} + ${i}`:`${i} + ${c}`
  d5q.innerHTML=Math.random()<0.5 ? `${l} = ${r}`:`${r} = ${l}`
  d5b.textContent='check'
  answer=a+b-c
  start=Date.now()
}
      let corr=0,tot=0, time=0
      d5b.onclick;d5f.onsubmit=()=>{
        if (d5b.textContent==='check'){
          time+=Date.now()-start
        //   if 
          let x
          tot+=1
        d5q.append(    (+(x=document.querySelector('#d5iiii')).value!=+answer )?'. wrong! dum/ass'
               //    +'its '+answer+' but you put '                  +x.value
                   :( ++corr) &&'. yeah right')
          d5q.append(`. ${corr}/${tot} correct in ${(time/1000).toFixed(3)}s`)
          d5b.textContent="next"
        {
 
          }
        } else {wow()
        }
      }
    </script>
  </form>
</div>
<div class="day closed" id="day-06">
  <button class="day-name">Dec 6</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-07">
  <button class="day-name">Dec 7</button>
  <div class="content">
    <!--  6 7-->
    <style>
      #d7 span{font-size:2em; display: inline-block}
      @keyframes d7{
        from {transform: translateY(-50%)}
        to {transform: translateY(50%)}
      }
      #d7 :first-child {animation: d7 1s  infinite alternate}
   #d7 :last-child {animation: d7 1s  infinite alternate-reverse}
    </style>
    <p id=d7>    
      <span>6</span><span>7</span>
    </p>
  </div>
</div>
<div class="day closed" id="day-08">
  <button class="day-name">Dec 8</button>
  <div class="content">
    it is someone's birthday! but it is not open Source..
    <p>please keep pleasant thouhghts for this individual
    who is now in thr 18â€“24 age group</p>
  </div>
</div>
<div class="day closed" id="day-09">
  <button class="day-name">Dec 9</button>
  <div class="content" od id=d9>
    <script type=module>
      const tr=[...'ðŸŒ²ðŸŒ³'
];      const f=document. createDocumentFragment()
      for(let i=25;i--;){
        let x
f.append(x=Object. assign (document. createElement('span'),{
  textContent:i===9?'ðŸŽ„':tr[+(Math.random()<.5)]
}))
        x.style. position="absolute"
        x.style.transform=`translate(-${
          x.style.left=Math.random()*100+'%'
        }, -${
          x.style.top=Math.random()*100+'%'
      })`
      }
      d9.append(f)
    </script>
  </div>
</div>
<div class="day closed" id="day-10">
  <button class="day-name">Dec 10</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-11">
  <button class="day-name">Dec 11</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-12">
  <button class="day-name">Dec 12</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-13">
  <button class="day-name">Dec 13</button>
  <div class="content" id=d13>
    nothing! :(
    <script type=module>
      // dles this emd jl

      // does this end up hiding the script tag 
      const start=new Date(2025,0,1)
      const end=new Date(2026,0,1)
const f = ()=>new Promise (resolve=> window. requestAnimationFrame(resolve))
      while(true) {
        //according to Google 
        //1ms/1 year= 3e-11
        //1s/1 year@=3e-8
        d13. textContent=`
        twenny twenny five is ${
         ( (Date. now()-start)/(end-start)*100
          ).toFixed(5)
      }% over.
        `
await f()
      }
    </script>
  </div>
</div>
<div class="day closed" id="day-14">
  <button class="day-name day14">Dec 14</button>
  <div class="content" style="position: relative;display: flex; justify-content: flex-end;flex-direction: column; height: 100%;">
    <img id="thegamer" style="position: absolute; top:0;" src="./ass/ets/he lost at uch.png" width="0" height="0">
    <p id="chickenjockey"></p>
    <script>
      (()=>{
        const id = document.querySelector("#thegamer");
        let [x,y] = [0,0];
        let [x_mod,y_mod] = [0,0];
        let [x_max,y_max] = [300,500];
        let [x_min,y_min] = [20,20];
        function f() {
          x_mod = Math.sign(x_mod) * Math.random() * 2;
          y_mod = Math.sign(y_mod) * Math.random() * 2;
          x = x + x_mod + Math.random() * 10 - 5;
          y = y + y_mod + Math.random() * 10 - 5;
          if (x > x_max) {
            x_mod = -1;
          }
          if (x < x_min) {
            x_mod = 1;
          }
          if (y > y_max) {
            y_mod = -1;
          }
          if (y < y_min) {
            y_mod = 1;
          }
          // console.log(x,y);
          id.width = x;
          id.height = y;
          requestAnimationFrame(f);
        }
        if (localStorage.getItem("advent2025-day-14") === "YES") {
          f();
        } else {
          document.querySelector(".day14").addEventListener("click", ()=>f());
        }
        (()=>{
          const id = document.getElementById("chickenjockey");
          const str = "he lost at ultimate chicken horse";
          let red = true;
          for (let i = 0; i < str.length; i++) {
            let span = document.createElement("span");
            span.style.color = red ? "red" : "white";
            span.textContent = str[i];
            id.appendChild(span);
            red = !red;
          }
        })();
      })();
    </script>
  </div>
</div>
<div class="day closed" id="day-15" 
onopen="d15start()">
  <button class="day-name">Dec 15</button>
  <div class="content" id="d15wrapper" style="display: flex;flex-direction: column; justify-content: end;">
    <img src="./ass/ets/image.png" width=30 height=40 id=d15img style="position: absolute;top:0;">
  </img><p>
    <button type="button" onpointerdown="d15hk(false);this.setPointerCapture(event.pointerId)" style="touch-action: none;" onpointerup="d15hk(false,-0)" onpointercancel="d15hk(false,0)">&lt;</button>
    <button type="button" onclick="d15shit()" id=d15shitter style="touch-action: none;" >ðŸš½</button>
    <button type="button" onpointerdown="d15hk(true);this.setPointerCapture(event.pointerId)" style="touch-action: none;" onpointerup="d15hk(true,-0)" onpointercancel="d15hk(true,0)">&gt;</button>
    <p style="font-size: 0.8em;">marcelo has <strong id=d15scores></strong></p>
    <p style="font-size: 0.8em;">remain <strong id=d15bullet></strong></p>
    <style>
    .d15-marcelo {
      position: absolute;
    }
    .d15-target {
      position: absolute;
    }
  </style>
      <script type=module>


let score = 0
let x = 50
let xv = 0

let elft = false,right=false
function handleKey (isAltRight,ok=true) {
 ! isAltRight?elft=ok:right=ok
// xv = 5 * (isAltRight?1:-1)
}
window.d15hk=handleKey
const mod=(a,b)=>(a%b+b)%b
const MAX = 100/5// twenty
window.d15shit = () => {
  if (used>=MAX){return}
  const wow = document.createElement('poop')
  wow.textContent = 'ðŸ’©'
  
wow.style.left = `${x}% `
wow.className='d15-marcelo'
  d15wrapper.append(wow)
  bombs.push({
elem: wow,
x: x,
y: 0
  })
  used++
  if (used>=MAX){
    d15shitter.disabled=true
  }
}

const f = ()=>new Promise (resolve=> window. requestAnimationFrame(resolve))

let bombs = []
let targets = []
let used = 0

await new Promise(resolve => {
  // const ro = new IntersectionObserver((x) => {
  //   console.log('dq15test')
  //   if (x.some(x => x.intersectionRatio >0)){
  //   resolve()
  //   ro.disconnect()}
  // })
  // ro.observe(d15wrapper)
  window.d15start=resolve
})
// console.log('day 15 start')

window.addEventListener('keydown', (e) => e.key==='ArrowLeft'&&handleKey(false)||e.key==='ArrowRight'&&handleKey(true)||e.key==='ArrowNeither'&&wtf)
window.addEventListener('keyup', (e) => e.key==='ArrowLeft'&&handleKey(false,0)||e.key==='ArrowRight'&&handleKey(true,0)||e.key==='ArrowNeither'&&wtf)

let lastTarget = 0 // this one is cursed idk why
let lastRaget2=0
      while(true) {

      if (elft)xv -= 0.5
      if (right)xv+= 0.5
xv *= 0.9
x += xv
x = mod((x + 10) ,110)-10

d15img.style.left = `${x}% `


for (const bomb of [...bombs]) {
  bomb.y += 3
  bomb.elem.style.top = `${bomb.y}px`
  
  if (bomb.y > 160) {
    for (const target of targets) {
      if (Math.abs(target.x - bomb.x) > 10) {
continue
      }
    bombs = bombs.filter(b => b!==bomb)
    bomb.elem.remove()
    targets = targets.filter(t => t!==target)
    target.elem.remove()
    if (target.isGood) {
      score++
      new Audio('./ass/ets/good job.mp3').play()
    } else {
      score--
      score--
      score--
      score--
      score--
      score--
      score--
      score--
      new Audio('./ass/ets/hit cat.mp3').play()
    }
    break
  } 
  }
  if (bomb.y > 180 ) {
    bombs = bombs.filter(b => b!==bomb)
    bomb.elem.remove()
  }
}

// bombs = bombs.filter(b => {
//   if (b.y > 200) {
//     b.elem.remove()
//     return false
//   }
//   return true
// })

d15scores.textContent = score + ' shitter points'
d15bullet.textContent = MAX - used + ' nngh'

if (MAX - used===0&&bombs.length===0){
  break
}

const flowers = [...'ðŸŒ»ðŸŒ¼ðŸŒ·ðŸŒ¹']
const cats =[ 'ðŸˆ','ðŸˆâ€â¬›']

if (Date.now() - lastRaget2 > 1000) {
  // console.log(Date.now() - lastRaget2)
  lastRaget2 = Date.now()
  // console.log(Date.now(),lastRaget2)
  const x = Math.random() * 90
  const elem = document.createElement('div')
  elem.className = 'd15-target'
  elem.style.left= x+'%'
  elem.style.top = '170px'
  const isGood=Math.random() < 0.7
  elem.textContent = isGood? flowers[Math.floor(Math.random()*flowers.length)]: cats[Math.floor(Math.random()*cats.length)]
  const wow = {
    elem,
    x,isGood
  }
  d15wrapper.append(elem)
  targets.push(wow)

  if (targets.length > 10){
  const first = targets.shift()
first.elem.remove()
}
}


await f()
      }
      d15bullet.textContent = 'you win!share feet with friends?'

</script>
  </div>
</div>
<div class="day closed" id="day-16" onopen="d16ddd()">
  <button class="day-name">Dec 16</button>
  <div class="content" onopen="d16ddd()">
    <style>
      #d16 {
        transform-style: preserve-3d; transform: perspective(600px);
        position: relative;
        width:60px;height:60px;
        margin:30px auto;
        transition: transform .5s;
        & img {
position: absolute;
top: 0;
left:0;
        }
      }
    </style>
    <p>get cubed</p>
    <div style="" id="d16">
      <img src="./ass/ets/imaage.png" alt="m" width="60" height="60" style="transform: translateY(30px) rotateX(90deg);">
      <img src="./ass/ets/imaage.png" alt="a" width="60" height="60" style="transform: translateY(-30px) rotateX(-90deg);">
      <img src="./ass/ets/imaage.png" alt="r" width="60" height="60" style="transform: translateX(-30px) rotateY(-90deg);">
      <img src="./ass/ets/imaage.png" alt="c" width="60" height="60" style="transform: translateX(30px) rotateY(90deg);">
      <img src="./ass/ets/imaage.png" alt="e" width="60" height="60" style="transform: translateZ(30px);">
      <img src="./ass/ets/imaage.png" alt="o" width="60" height="60" style="transform: translateZ(-30px);">
    </div>
    <script type="module"
    
    >

await new Promise(resolve => (window.d16ddd=resolve))

let x = 0, y = 0, z = 0

while (true) {
  // d16.style.transform = `perspective(600px) rotateX(${x}deg) rotateY(${y}deg) rotateZ(${z}deg)`
  d16.style.transform = `perspective(200px) rotateX(${
    Math.random() * 360
  }deg) rotateY(${Math.random() * 360
  }deg) rotateZ(${Math.random() * 360
  }deg)`
  y = Math.sin(Date.now() / 2454) * 40
  z += 0.5
  x += 5
  await new Promise(r => setTimeout(r, 600))
  // await new Promise(window.requestAnimationFrame)
}


    //</script>

    <!--
\
 \
  \
   \
    \
     \ _______ /
      |
      |
      |
      |
     /
    /
   /
  /
 /
/
    -->
    <!-- nothing! :( -->
  </div>
</div>
<div class="day closed" id="day-17">
  <button class="day-name">Dec 17</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-18">
  <button class="day-name">Dec 18</button>
  <div class="content">
    <button id="d17s" style="cursor: pointer;">ðŸŽµchoreography & merrimentðŸŽ¶</button>
    <script>
      /** @type {AudioContext} */
      let ctx
      let buffer
      d17s.onclick=async()=>{
        // d17s.onclick=null
        d17s.disabled = true
        document.title = 'jammin\''


        ctx ??= new AudioContext()
       const audioContext=ctx
         buffer ??= await fetch('ass/ets/IMG_2285.mp3').then(r => r.arrayBuffer()).then(x => ctx.decodeAudioData(x))

        const delay = 0.2
        const t = [
          // c x d x e f x g x a x b
          // [4,0], // b
          // [2,1], // a
          // [4, 1.5], // b
          // [0,2], // g
          // e e e e e e e g c d e
          [-0.5,-5],  // dummy
          [-0.75,-4.5],  // dummy
          [0,0], 
          [0,1], 
          [0,2], 
          [0,4], 
          [0,5], 
          [0,6], 
          [0,8], 
          [3,9], 
          [-4,10], 
          [-2,11], 
          [0,12], 
          // f f f f  f e e e  e d d e  d g 
          [1,16], 
          [1,17], 
          [1,18], 
          [1,19], 
          [1,20], 
          [0,21], 
          [0,22], 
          [0,23], 
          [0,24], 
          [-2,25], 
          [-2,26], 
          [0,27], 
          [-2,28], 
          [3,30], 
        ]
        // while (true) {
          const thegamer= audioContext.currentTime
          for (const [i,[freq,dur]] of t.entries()){
               const sourceNode = audioContext.createBufferSource();
  sourceNode.buffer = buffer; // Assign the loaded buffer

  var semitoneRatio = Math.pow(2, 1/12);
  sourceNode.playbackRate.value = Math.pow(semitoneRatio, freq+0);

  // Connect the source to the destination
  sourceNode.connect(audioContext.destination);

  // Start playback at the current time
  sourceNode.start(thegamer+(dur+6)*delay); // seconds
          // }
          await new Promise(r => setTimeout(r,delay*3*1000)) //ms
        d17s.disabled = false
        }
      }
      </script>
  </div>
</div>
<div class="day closed" id="day-19">
  <button class="day-name">Dec 19</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-20">
  <button class="day-name">Dec 20</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-21">
  <button class="day-name">Dec 21</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-22">
  <button class="day-name">Dec 22</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-23">
  <button class="day-name">Dec 23</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-24">
  <button class="day-name">Dec 24</button>
  <div class="content">
    nothing! :(
  </div>
</div>
<div class="day closed" id="day-25">
  <button class="day-name">Dec 25</button>
  <div class="content">
    Merry Christmas!
  </div>
</div>
  
</div>

  <script type="module">
    const params = new URL(location).searchParams
const debugMode=params.get('debug')==='yes'
    const d = debugMode
    const now=Date.now()
    // BUGFIX: the selector was for the tag `day`, not the class `.day`
    for (const day of document.querySelectorAll('.day')){
// BUGFIX: the day number is at index 1 after splitting, not 0
const date = new Date(2025,12-1,+day.id.split('-')[1])
      const name=day.querySelector('.day-name')
      if (!d&&date>now) {
        name.disabled=true
      }
      name.onclick=()=>{
        day.classList.remove('closed')
        day.classList.add('open')
   if(!d)     localStorage[`advent2025-${day.id}`]='YES'
        const js = day?.getAttribute('onopen')
       if (js) {
        try { eval(js)} catch (err) {console.error(name.textContent,js,err)}
       }
      }
      if(!d&&localStorage[`advent2025-${day.id}`]==='YES'){
        day.classList.add('alreadyOpen')
name.click()
      }
    }
  </script>


<script type="module" src="./adventageous.js">


 
</script>
  
</body>
